<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - Men√∫ de Pausa</title>
    <link rel="stylesheet" href="css/estilos.css">
    <style>
        body {
            background: #1a1a2e;
            color: white;
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        
        .test-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .test-btn {
            background: rgba(0, 255, 0, 0.2);
            border: 2px solid rgba(0, 255, 0, 0.4);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
        }
        
        .test-btn:hover {
            background: rgba(0, 255, 0, 0.3);
        }
    </style>
</head>
<body>
    <div class="test-info">
        <h1>üéÆ Test del Men√∫ de Pausa</h1>
        <p>Este es un test independiente del men√∫ de pausa.</p>
        <p><strong>Controles:</strong></p>
        <ul>
            <li><kbd>ESC</kbd> - Abrir/cerrar men√∫ de pausa</li>
            <li><kbd>C</kbd> - Configuraci√≥n (cuando el men√∫ est√° abierto)</li>
            <li><kbd>K</kbd> - Controles (cuando el men√∫ est√° abierto)</li>
            <li><kbd>T</kbd> - Estad√≠sticas (cuando el men√∫ est√° abierto)</li>
        </ul>
    </div>
    
    <button class="test-btn" onclick="abrirMenu()">Abrir Men√∫ de Pausa</button>
    <button class="test-btn" onclick="simularKill()">Simular Kill (+1)</button>
    <button class="test-btn" onclick="simularDeath()">Simular Death (+1)</button>
    <button class="test-btn" onclick="simularDisparo()">Simular Disparo (+10)</button>

    <!-- Men√∫ de Pausa (copiado del index.html) -->
    <div id="pause-menu" class="hidden">
      <div class="pause-overlay"></div>
      <div class="pause-content">
        <div class="pause-title">JUEGO PAUSADO</div>
        
        <div class="pause-buttons">
          <button id="resume-btn" class="pause-btn primary">
            <span class="btn-icon">‚ñ∂</span>
            Continuar
            <span class="btn-key">ESC</span>
          </button>
          
          <button id="settings-btn" class="pause-btn">
            <span class="btn-icon">‚öô</span>
            Configuraci√≥n
            <span class="btn-key">C</span>
          </button>
          
          <button id="controls-btn" class="pause-btn">
            <span class="btn-icon">üéÆ</span>
            Controles
            <span class="btn-key">K</span>
          </button>
          
          <button id="stats-btn" class="pause-btn">
            <span class="btn-icon">üìä</span>
            Estad√≠sticas
            <span class="btn-key">T</span>
          </button>
          
          <button id="disconnect-btn" class="pause-btn warning">
            <span class="btn-icon">üîå</span>
            Desconectar
            <span class="btn-key">D</span>
          </button>
          
          <button id="exit-btn" class="pause-btn danger">
            <span class="btn-icon">üö™</span>
            Salir del Juego
            <span class="btn-key">Q</span>
          </button>
        </div>
        
        <!-- Settings Panel -->
        <div id="settings-panel" class="pause-panel hidden">
          <div class="panel-header">
            <h3>Configuraci√≥n</h3>
            <button id="settings-back-btn" class="back-btn">‚Üê</button>
          </div>
          <div class="settings-grid">
            <div class="setting-item">
              <label>Sensibilidad del Mouse</label>
              <input type="range" id="mouse-sensitivity" min="0.001" max="0.01" step="0.001" value="0.002">
              <span id="sensitivity-value">0.002</span>
            </div>
            <div class="setting-item">
              <label>Volumen General</label>
              <input type="range" id="master-volume" min="0" max="1" step="0.1" value="0.5">
              <span id="volume-value">50%</span>
            </div>
            <div class="setting-item">
              <label>FOV (Campo de Visi√≥n)</label>
              <input type="range" id="fov-slider" min="60" max="120" step="5" value="75">
              <span id="fov-value">75¬∞</span>
            </div>
            <div class="setting-item">
              <label>Mostrar FPS</label>
              <input type="checkbox" id="show-fps">
            </div>
            <div class="setting-item">
              <label>Crosshair Din√°mico</label>
              <input type="checkbox" id="dynamic-crosshair" checked>
            </div>
          </div>
        </div>
        
        <!-- Controls Panel -->
        <div id="controls-panel" class="pause-panel hidden">
          <div class="panel-header">
            <h3>Controles</h3>
            <button id="controls-back-btn" class="back-btn">‚Üê</button>
          </div>
          <div class="controls-grid">
            <div class="control-group">
              <h4>Movimiento</h4>
              <div class="control-item"><span>Adelante</span><kbd>W</kbd></div>
              <div class="control-item"><span>Atr√°s</span><kbd>S</kbd></div>
              <div class="control-item"><span>Izquierda</span><kbd>A</kbd></div>
              <div class="control-item"><span>Derecha</span><kbd>D</kbd></div>
              <div class="control-item"><span>Saltar</span><kbd>ESPACIO</kbd></div>
              <div class="control-item"><span>Dash</span><kbd>E</kbd></div>
            </div>
            <div class="control-group">
              <h4>Combate</h4>
              <div class="control-item"><span>Disparar</span><kbd>CLIC IZQ</kbd></div>
              <div class="control-item"><span>Apuntar</span><kbd>CLIC DER</kbd></div>
              <div class="control-item"><span>Recargar</span><kbd>R</kbd></div>
              <div class="control-item"><span>Cambiar Arma</span><kbd>Q / RUEDA</kbd></div>
              <div class="control-item"><span>Arma Espec√≠fica</span><kbd>1-8</kbd></div>
            </div>
            <div class="control-group">
              <h4>Sistema</h4>
              <div class="control-item"><span>Pausar</span><kbd>ESC</kbd></div>
              <div class="control-item"><span>Configuraci√≥n</span><kbd>ESC + C</kbd></div>
              <div class="control-item"><span>Estad√≠sticas</span><kbd>ESC + T</kbd></div>
            </div>
          </div>
        </div>
        
        <!-- Stats Panel -->
        <div id="stats-panel" class="pause-panel hidden">
          <div class="panel-header">
            <h3>Estad√≠sticas de la Partida</h3>
            <button id="stats-back-btn" class="back-btn">‚Üê</button>
          </div>
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-value" id="kills-stat">0</div>
              <div class="stat-label">Eliminaciones</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="deaths-stat">0</div>
              <div class="stat-label">Muertes</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="kd-ratio">0.00</div>
              <div class="stat-label">K/D Ratio</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="shots-fired">0</div>
              <div class="stat-label">Disparos</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="accuracy-stat">0%</div>
              <div class="stat-label">Precisi√≥n</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="playtime-stat">00:00</div>
              <div class="stat-label">Tiempo Jugado</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- FPS Counter -->
    <div id="fps-counter" class="hidden">
      <span id="fps-value">60</span> FPS
    </div>

    <script type="module">
        import { 
            inicializarMenuPausa, 
            alternarMenuPausa,
            registrarKill,
            registrarDeath,
            registrarDisparo,
            registrarImpacto
        } from './src/sistemas/menuPausa.js';

        // Inicializar men√∫ de pausa
        inicializarMenuPausa({
            onReanudar: () => {
                console.log('‚úÖ Test: Juego reanudado');
            },
            onDesconectar: () => {
                console.log('üîå Test: Desconectar del servidor');
                alert('Test: Desconectar del servidor');
            },
            onSalir: () => {
                console.log('üö™ Test: Salir del juego');
                alert('Test: Salir del juego');
            },
            onConfiguracionCambiada: (tipo, valor) => {
                console.log(`‚öôÔ∏è Test: Configuraci√≥n cambiada: ${tipo} = ${valor}`);
            }
        });

        // Funciones de test
        window.abrirMenu = () => {
            alternarMenuPausa();
        };

        window.simularKill = () => {
            registrarKill();
            console.log('üíÄ Kill registrado');
        };

        window.simularDeath = () => {
            registrarDeath();
            console.log('‚ò†Ô∏è Death registrado');
        };

        window.simularDisparo = () => {
            for (let i = 0; i < 10; i++) {
                registrarDisparo();
                if (i < 3) registrarImpacto(); // 30% de precisi√≥n
            }
            console.log('üî´ 10 disparos registrados (3 impactos)');
        };

        // Manejar ESC para abrir/cerrar men√∫
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Escape') {
                alternarMenuPausa();
            }
        });

        console.log('üéÆ Test del men√∫ de pausa cargado. Presiona ESC para abrir el men√∫.');
    </script>
</body>
</html>