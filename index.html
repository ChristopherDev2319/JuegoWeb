<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Three.js Primera Persona - Disparo</title>
    <link rel="stylesheet" href="css/estilos.css" />
    
    <!-- Import map para resolver m√≥dulos de npm en el navegador -->
    <script type="importmap">
      {
        "imports": {
          "@dimforge/rapier3d-compat": "https://cdn.jsdelivr.net/npm/@dimforge/rapier3d-compat@0.14.0/+esm"
        }
      }
    </script>
  </head>
  <body>
    <!-- Pantalla de carga -->
    <div id="loading-screen">
      <div class="loading-content">
        <div class="loading-title">CARGANDO</div>
        <div class="loading-bar-container">
          <div class="loading-bar" id="loading-bar"></div>
        </div>
        <div class="loading-text" id="loading-text">Iniciando...</div>
      </div>
    </div>

    <!-- Controles ocultos - ver en men√∫ ESC -->
    <div id="info" style="display: none;">
      <div>WASD - Movimiento</div>
      <div>Mouse - Mirar alrededor</div>
      <div>Clic Izquierdo - Disparar</div>
      <div>Clic Derecho - Apuntar</div>
      <div>Espacio - Saltar</div>
      <div>R - Recargar</div>
      <div>E - Dash</div>
      <div>Q / Rueda Mouse - Cambiar arma</div>
      <div>1-8 - Seleccionar arma</div>
    </div>
    <div id="crosshair"></div>
    <div id="aim-indicator">APUNTANDO</div>
    
    <!-- Weapon info -->
    <div id="weapon-info">
      <div id="weapon-name">M4A1</div>
      <div id="ammo">30 / 120</div>
    </div>
    
    <!-- Weapon list -->
    <div id="weapon-list"></div>
    
    <div id="dash-charges">
      <span>DASH: </span>
      <span class="dash-icon"></span>
      <span class="dash-icon"></span>
      <span class="dash-icon"></span>
    </div>
    <div id="damage-indicator"></div>
    
    <!-- Death screen overlay -->
    <div id="death-screen" class="hidden">
      <div class="death-content">
        <div class="death-title">ELIMINADO</div>
        <div class="death-killer">por <span id="killer-name">Jugador</span></div>
        <div class="respawn-countdown">Reapareciendo en <span id="respawn-timer">5</span>s</div>
      </div>
    </div>
    
    <!-- Kill feed -->
    <div id="kill-feed"></div>
    
    <!-- Health bar -->
    <div id="health-bar-container">
      <div id="health-bar"></div>
      <div id="health-text">200 / 200</div>
    </div>

    <!-- Pause Menu -->
    <div id="pause-menu" class="hidden">
      <div class="pause-overlay"></div>
      <div class="pause-content">
        <div class="pause-title">JUEGO PAUSADO</div>
        
        <div class="pause-buttons">
          <button id="resume-btn" class="pause-btn primary">
            <span class="btn-icon">‚ñ∂</span>
            Continuar
            <span class="btn-key">P</span>
          </button>
          
          <button id="settings-btn" class="pause-btn">
            <span class="btn-icon">‚öô</span>
            Configuraci√≥n
            <span class="btn-key">C</span>
          </button>
          
          <button id="controls-btn" class="pause-btn">
            <span class="btn-icon">üéÆ</span>
            Controles
            <span class="btn-key">K</span>
          </button>
          
          <button id="stats-btn" class="pause-btn">
            <span class="btn-icon">üìä</span>
            Estad√≠sticas
            <span class="btn-key">T</span>
          </button>
          
          <button id="disconnect-btn" class="pause-btn warning">
            <span class="btn-icon">üîå</span>
            Desconectar
            <span class="btn-key">D</span>
          </button>
          
          <button id="exit-btn" class="pause-btn danger">
            <span class="btn-icon">üö™</span>
            Salir del Juego
            <span class="btn-key">Q</span>
          </button>
        </div>
        
        <!-- Settings Panel -->
        <div id="settings-panel" class="pause-panel hidden">
          <div class="panel-header">
            <h3>Configuraci√≥n</h3>
            <button id="settings-back-btn" class="back-btn">‚Üê</button>
          </div>
          <div class="settings-grid">
            <div class="setting-item">
              <label>Sensibilidad del Mouse</label>
              <input type="range" id="mouse-sensitivity" min="0.001" max="0.01" step="0.001" value="0.002">
              <span id="sensitivity-value">0.002</span>
            </div>
            <div class="setting-item">
              <label>Volumen General</label>
              <input type="range" id="master-volume" min="0" max="1" step="0.1" value="0.5">
              <span id="volume-value">50%</span>
            </div>
            <div class="setting-item">
              <label>FOV (Campo de Visi√≥n)</label>
              <input type="range" id="fov-slider" min="60" max="120" step="5" value="75">
              <span id="fov-value">75¬∞</span>
            </div>
            <div class="setting-item">
              <label>Mostrar FPS</label>
              <input type="checkbox" id="show-fps">
            </div>
            <div class="setting-item">
              <label>Crosshair Din√°mico</label>
              <input type="checkbox" id="dynamic-crosshair" checked>
            </div>
          </div>
        </div>
        
        <!-- Controls Panel -->
        <div id="controls-panel" class="pause-panel hidden">
          <div class="panel-header">
            <h3>Controles</h3>
            <button id="controls-back-btn" class="back-btn">‚Üê</button>
          </div>
          <div class="controls-grid">
            <div class="control-group">
              <h4>Movimiento</h4>
              <div class="control-item"><span>Adelante</span><kbd>W</kbd></div>
              <div class="control-item"><span>Atr√°s</span><kbd>S</kbd></div>
              <div class="control-item"><span>Izquierda</span><kbd>A</kbd></div>
              <div class="control-item"><span>Derecha</span><kbd>D</kbd></div>
              <div class="control-item"><span>Saltar</span><kbd>ESPACIO</kbd></div>
              <div class="control-item"><span>Dash</span><kbd>E</kbd></div>
            </div>
            <div class="control-group">
              <h4>Combate</h4>
              <div class="control-item"><span>Disparar</span><kbd>CLIC IZQ</kbd></div>
              <div class="control-item"><span>Apuntar</span><kbd>CLIC DER</kbd></div>
              <div class="control-item"><span>Recargar</span><kbd>R</kbd></div>
              <div class="control-item"><span>Cambiar Arma</span><kbd>Q / RUEDA</kbd></div>
              <div class="control-item"><span>Arma Espec√≠fica</span><kbd>1-8</kbd></div>
            </div>
            <div class="control-group">
              <h4>Sistema</h4>
              <div class="control-item"><span>Pausar</span><kbd>TAB</kbd></div>
              <div class="control-item"><span>Configuraci√≥n</span><kbd>TAB + C</kbd></div>
              <div class="control-item"><span>Estad√≠sticas</span><kbd>TAB + T</kbd></div>
            </div>
          </div>
        </div>
        
        <!-- Stats Panel -->
        <div id="stats-panel" class="pause-panel hidden">
          <div class="panel-header">
            <h3>Estad√≠sticas de la Partida</h3>
            <button id="stats-back-btn" class="back-btn">‚Üê</button>
          </div>
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-value" id="kills-stat">0</div>
              <div class="stat-label">Eliminaciones</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="deaths-stat">0</div>
              <div class="stat-label">Muertes</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="kd-ratio">0.00</div>
              <div class="stat-label">K/D Ratio</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="shots-fired">0</div>
              <div class="stat-label">Disparos</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="accuracy-stat">0%</div>
              <div class="stat-label">Precisi√≥n</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="playtime-stat">00:00</div>
              <div class="stat-label">Tiempo Jugado</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- FPS Counter -->
    <div id="fps-counter" class="hidden">
      <span id="fps-value">60</span> FPS
    </div>

    <!-- Librer√≠as externas de Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fflate@0.7.4/umd/index.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/FBXLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>

    <!-- Configuraci√≥n del juego -->
    <script type="module" src="configuracion-juego.js"></script>

    <!-- Punto de entrada principal del juego -->
    <script type="module" src="src/main.js"></script>
  </body>
</html>
